# 作用域和作用域链

## 作用域

### 全局作用域

代码中任何地方都可以访问到的对象拥有全局作用域。



- 未定义直接赋值的变量自动声明为拥有全局作用域

```javascript
function outfun() {
  variable = "test";
 	var variable1 = "test1"
}

outfun();
console.log(variable);  // test
console.log(variable1); // undefined
```



- 所有 *window* 对象的属性拥有全局作用域

一般情况下， *window* 对象的内置属性都拥有全局作用域，例如 *window.name, windows.location, window.top* 等



全局作用域有一个弊端：容易污染全局命名空间，容易引起命名冲突。

> Tip: 可以使用 (function() {...})()



### 函数作用域

函数作用域指只有函数内部可以访问到。

```javascript
function test() {
  var stuName = "zhangsan";
  function innerTest() {
    console.log(stuName);
  }
  innerTest();
}

console.log(stuName); // undefined
innerTest(); // undefined
```



### 块级作用域

新增 *let* 和 *const* 声明，所声明的变量在指定块的作用域外无法被访问。

块级作用域在如下情况被创建：

1. 在一个函数内部
2. 在一个代码块（有一对花括号包括）内部

let 声明的语法与 var 的语法一致。你基本上可以用 let 来代替 var 进行变量声明，但会将变量的作用域限制在当前代码块中。会计作用域特点：

- 声明变量不会被提升到代码块顶部



## 作用域链

### 自由变量

 Console.log(a) 要得到 a 变量，但是当前的作用域中没有定义 a。当前作用域没有定义的变量，这就是自由变量。

如何得到自由变量？

需要向父级作用域寻找

```js
var a = 100
function fn() {
  var b = 200;
  console.log(a);
  console.log(b);
}

fn()
```



### 作用域链

如果父级也没有 (也就是自由变量)，再一层一层向上寻找，直到找到全局作用域没有找到，就宣布放弃。这种一层一层的关系，就是作用域链。

```js
var a = 100
function fn1() {
  var b = 200;
  function fn2() {
    var c = 300;
    console.log(a)
    console.log(b)
    console.log(c)
  }
  fn2()
}

fn1()
```



作用域链的取值要找到这个函数**创建**的域。

<img src="/Users/lujiema/Library/Application Support/typora-user-images/Screenshot 2024-12-26 at 11.01.56 PM.png" alt="Screenshot 2024-12-26 at 11.01.56 PM" style="zoom:50%;" />





## Q&A

1. 什么是作用域？

   全局作用域 函数作用域 块级作用域

2. 作用域链

   当访问自由变量的时候，如果没有找到，就会上去（父级）查找，如果父级没有，就会向上查找，直到找到作用域为止。

   作用域链重要的特性：作用域中的值是创建的时候就被存储了，是**静态**的。





















