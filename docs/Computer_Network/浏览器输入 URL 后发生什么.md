# 浏览器输入 URL 后发生什么？



> 简洁版：
> URL 解析 -> DNS 解析 -> 建立 TCP 连接 -> 构建 HTTP 请求 -> 发送 HTTP 请求 -> 服务器处理并发送请求和响应 -> 断开 TCP 连接 ->接收 HTML 和 CSS 文件 -> 构建页面 -> 渲染页面



1. 输入网址，进行 URL 的补全
2. 查找浏览器缓存，如果找到资源的话（强缓存），直接返回资源，不需要进行后续的网络请求；如果没有找到，进行后续的网络请求
3. DNS解析，根据补全的 URL 查到其对应的 IP 地址。其中有对应的查找顺序：本地 Host 文件 -> 路由器缓存 -> DNS 服务器 -> DNS 根服务器
4. 建立 TCP 连接，三次握手
5. 浏览器会准备好请求行，请求体等，把该域名相关的 cookie 带上，进行网络的请求。如果涉及到 HTTPS 的话，我们会进行加密以及解密等操作
6. 服务器接收到浏览器的网络请求后，根据请求生成响应信息，准备好返回的资源
7. 断开 TCP 连接，四次挥手
8. 浏览器解析收到的资源
   1. 如果**响应头**是 301，302，进行重定向到新地址；
   2. 看 **Content-Type 属性**，如果接收到的是 HTML 文件（通过二进制发送 - http2.0），创建 DOM 树，解析 CSS 资源并进行计算，合并 DOM 树和 CSS，构建渲染树。然后浏览器进行布局和绘制，最后渲染到最终的页面（详情可以看[浏览器页面渲染过程]()）